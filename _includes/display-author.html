<!-- show-author-with-roles.html -->
<article class="author-card">
    <div class="author-avatar">
        {% if author.avatar %}
        <img loading="{{ loading }}" src="{{ author.avatar | relative_url }}" alt="An image of {{ author.name }}">
        {% else %}
        <img loading="{{ loading }}" src="{{ site.author.avatar | relative_url }}" alt="An image of {{ author.name }}">
        {% endif %}
    </div>

    <div class="author-info">
        <b class="author-name">
            {% if author.links %}
            <a href="{{ author.links[0].url }}" aria-label="Access the primary external link of this author">{{ author.name }}</a>
            {% else %}
            {{ author.name }}
            {% endif %}
        </b>

        {% if author.advisor %}
        <div class="author-advisor">
            <b>
                {% if author.role == "Postdoc" %}
                Working with:
                {% elsif author.role == "Intern" %}
                Hosted by:
                {% else %}
                Advised by:
                {% endif %}
            </b>
            {{ author.advisor }}
            {% if author.date %}
            <span>
                ({{ author.date }})
            </span>
            {% endif %}
        </div>
        {% endif %}

        {% if author.bio %}
        <div class="author-bio">
            {{ author.bio }}
        </div>
        {% endif %}

        {% if author.note %}
        <div class="author-note">
            {{ author.note }}
        </div>
        {% endif %}

        {% if author.new_role %}
        <div class="author-note">
            <b>➡️ </b> {{ author.new_role }}
        </div>
        {% endif %}

        {% if author.links %}
        <div class="author-links">
            {% for link in author.links %}
                {% include infer-icon.html link=link %}
                {% if icon %}
                <a href="{{ link.url }}" class="{{ icon }} author-button" aria-label="Access author's external link for {{ icon }}"></a>
                {% endif %}
            {% endfor %}
        </div>
        {% endif %}
    </div>
</article>
